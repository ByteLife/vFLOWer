<?xml version="1.0" encoding="UTF-8"?>
<workflow xmlns="http://vmware.com/vco/workflow" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://vmware.com/vco/workflow http://vmware.com/vco/workflow/Workflow-v4.xsd" root-name="item2" object-name="workflow:name=generic" id="7906a322-4356-4357-94eb-961892fcf6e2" version="0.0.1" api-version="3.1.0" allowed-operations="fve" restartMode="1" resumeFromFailedMode="0">
    <display-name>Delete script configuration</display-name>

    <description>Delete a script configuration</description>

    <position x="100.0" y="50.0"/>

    <input>
        <param name="scriptConfigurationName" type="string"/>
        <param name="deleteAdditionalResource" type="boolean"/>
    </input>

    <attrib name="resourceElementCategory" type="ResourceElementCategory" read-only="false">
        <value encoded="n">__NULL__</value>
    </attrib>
    <attrib name="scriptConfigurationResourceElement" type="ResourceElement" read-only="false">
        <value encoded="n">dunes://service.dunes.ch/ResourceElement?id='b0004f79-cdbf-4890-a3fd-f86b438da9f1'&amp;dunesName='ResourceElement'</value>
    </attrib>
    <attrib name="resourceToCopyKey" type="string" read-only="false">
        <value encoded="n">resourceToCopy</value>
    </attrib>
    <attrib name="resourceToDelete" type="ResourceElement" read-only="false">
        <value encoded="n">__NULL__</value>
    </attrib>
    <workflow-note x="760.0" y="23.772727272727266" w="204.0" h="87.0">
        <description>Delete additional resource</description>
    </workflow-note>
    <workflow-note x="500.0" y="105.5909090909091" w="204.0" h="88.0">
        <description>Delete script configuration</description>
    </workflow-note>

    <workflow-item name="item3" out-name="item4" type="task" script-module="com.vmware.coe.library.resourceElements/getOrCreateResourceElement">
        <display-name>getOrCreateResourceElement</display-name>

        <script encoded="false">
//Auto generated script, cannot be modified !
actionResult = System.getModule("com.vmware.coe.library.resourceElements").getOrCreateResourceElement(resourceElementCategory,name) ;
        </script>

        <in-binding>
            <bind name="resourceElementCategory" type="ResourceElementCategory" export-name="resourceElementCategory">
                <description>Where to look for resource elements or create them</description>
            </bind>
            <bind name="name" type="string" export-name="scriptConfigurationName">
                <description>The name of the resource element to get or create</description>
            </bind>
        </in-binding>

        <out-binding>
            <bind name="actionResult" type="ResourceElement" export-name="scriptConfigurationResourceElement"/>
        </out-binding>

        <description>Get a configuration element by name. If it is not found create an empty resource element</description>

        <position x="344.5" y="55.40909090909091"/>
    </workflow-item>

    <workflow-item name="item1" out-name="item5" type="task">
        <display-name>Delete resource</display-name>

        <script encoded="false">
Server.removeResourceElement(scriptConfigurationResourceElement);
        </script>

        <in-binding>
            <bind name="scriptConfigurationResourceElement" type="ResourceElement" export-name="scriptConfigurationResourceElement"/>
        </in-binding>

        <out-binding/>

        <position x="504.5" y="119.04545454545453"/>
    </workflow-item>

    <workflow-item name="item2" out-name="item3" type="task">
        <display-name>Get resource element category</display-name>

        <script encoded="false">
resourceElementCategory = scriptConfigurationResourceElement.getResourceElementCategory();
        </script>

        <in-binding>
            <bind name="scriptConfigurationResourceElement" type="ResourceElement" export-name="scriptConfigurationResourceElement"/>
        </in-binding>

        <out-binding>
            <bind name="resourceElementCategory" type="ResourceElementCategory" export-name="resourceElementCategory"/>
        </out-binding>

        <position x="204.5" y="55.40909090909091"/>
    </workflow-item>

    <workflow-item name="item4" out-name="item6" type="condition" alt-out-name="item1" comparator="0">
        <display-name>Delete additional resource ?</display-name>

        <script encoded="false">
//Generated by the system, cannot be edited
return (deleteAdditionalResource == true) ;
        </script>

        <in-binding>
            <bind name="deleteAdditionalResource" type="boolean" export-name="deleteAdditionalResource"/>
        </in-binding>
        <condition name="deleteAdditionalResource" type="boolean" comparator="0" label="null">false</condition>

        <position x="504.5" y="45.40909090909091"/>
    </workflow-item>

    <workflow-item name="item5" type="end" end-mode="0">
        <position x="544.5" y="172.68181818181816"/>
    </workflow-item>

    <workflow-item name="item6" out-name="item7" type="task" script-module="com.vmware.coe.library.resourceElements/getResourceElementAttributeWithKeyByResourceElementName">
        <display-name>getResourceElementAttributeWithKeyByResourceElementName</display-name>

        <script encoded="false">
//Auto generated script, cannot be modified !
actionResult = System.getModule("com.vmware.coe.library.resourceElements").getResourceElementAttributeWithKeyByResourceElementName(resourceElementInCategory,resourceElementName,key) ;
        </script>

        <in-binding>
            <bind name="resourceElementInCategory" type="ResourceElement" export-name="scriptConfigurationResourceElement"/>
            <bind name="resourceElementName" type="string" export-name="scriptConfigurationName"/>
            <bind name="key" type="string" export-name="resourceToCopyKey"/>
        </in-binding>

        <out-binding>
            <bind name="actionResult" type="ResourceElement" export-name="resourceToDelete"/>
        </out-binding>

        <description>Get the key value from stored in a resource element. A resource element in the resource element category need to be set as the first parameter</description>

        <position x="644.5" y="55.40909090909091"/>
    </workflow-item>

    <workflow-item name="item7" out-name="item1" type="task">
        <display-name>Delete resource</display-name>

        <script encoded="false">
Server.removeResourceElement(resourceToDelete);
        </script>

        <in-binding>
            <bind name="resourceToDelete" type="ResourceElement" export-name="resourceToDelete"/>
        </in-binding>

        <out-binding/>

        <position x="784.5" y="55.40909090909091"/>
    </workflow-item>

    <presentation>
        <p-step>
            <title>Script configuration</title>
            <p-group>
                <title>Configurations</title>
                <p-param name="scriptConfigurationName">
                    <desc>Configuration name</desc>
                    <p-qual kind="static" name="mandatory" type="boolean">true</p-qual>
                    <p-qual kind="ognl" name="linkedEnumeration" type="Array/string">GetAction("com.vmware.coe.library.resourceElements","getOtherResourceElementNames").call( #scriptConfigurationResourceElement )</p-qual>
                </p-param>
                <p-param name="deleteAdditionalResource">
                    <desc>Also delete the additional file ?</desc>
                    <p-qual kind="ognl" name="visible" type="boolean">GetAction("com.vmware.coe.library.resourceElements","getResourceElementAttributeWithKeyByResourceElementName").call( #scriptConfigurationResourceElement , #scriptConfigurationName , "copyResource" )</p-qual>
                    <p-qual kind="static" name="defaultValue" type="boolean">__NULL__</p-qual>
                </p-param>
            </p-group>
        </p-step>
    </presentation>
</workflow>
